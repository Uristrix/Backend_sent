{"version":3,"sources":["table.js","form.js","index.js"],"names":["Table","props","genTemplate","str","i","Object","keys","data","length","bar","concat","slice","map","elem","className","paragraphs","el","style","sort","el3","join","el2","URL","process","Form","useState","url","setUrl","textarea","setTextArea","useForm","shouldUnregister","register","handleSubmit","errors","formState","changeURL","useEffect","ta","document","querySelectorAll","M","CharacterCounter","init","onSubmit","console","log","updateLoad","axios","post","then","res","updateData","catch","err","responseType","window","createObjectURL","Blob","link","createElement","href","setAttribute","body","appendChild","click","id","required","maxLength","htmlFor","onClick","push","index","indexOf","el1","getElementById","value","pop","delTextArea","type","exampleRequired","App","setData","load","setLoad","ReactDOM","render"],"mappings":"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","file":"static/js/main.ca8e2302.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Table = (props) =>\r\n{\r\n    const len = () => { return {'width': (1000 +(Object.keys(props.data['data'][0]['sentences'][0]).length - 1)*150) + 'px'} }\r\n\r\n    const genTemplate = (str) => {\r\n        for(let i = 0; i < Object.keys(props.data['data'][0]['sentences'][0]).length - 1; i++) str += ' 2fr'\r\n        return {'gridTemplateColumns': str}\r\n    }\r\n\r\n    const genTemplate2 = (str) => {\r\n         str += ` ${3 + (Object.keys(props.data['data'][0]['sentences'][0]).length -1) * 2}fr`\r\n        return {'gridTemplateColumns': str}\r\n    }\r\n\r\n    if (props.data['data'].length !== 0)\r\n    {\r\n        const keys = Object.keys(props.data['data'][0])\r\n            .concat(Object.keys(props.data['data'][0]['sentences'][0])).slice(0,-1)\r\n\r\n        const bar = keys.map( (elem, i) => {return <div className= 'el bar' >{elem}</div>})\r\n\r\n        const paragraphs = props.data['data'].map((el) =>\r\n        {\r\n            return <div className='grid second' style={genTemplate2('2fr 1fr')}>\r\n                {Object.keys(el).sort().slice(0,-1).map((el3) => {\r\n                    return <div className='el'>{el[el3].join(', ')}</div>\r\n                })\r\n                }\r\n                <div>{el['sentences'].map((el2) =>\r\n                    {\r\n                        return <div className= 'sub' style={genTemplate('3fr')}>\r\n                            <div className='el'>{el2['text'].join(', ')}</div>\r\n                            {Object.keys(el2).slice(0,-1).map( (el3) => {\r\n                                return <div className='el'>{el2[el3].join(', ')}</div>}\r\n                            )}\r\n                        </div>\r\n                    })\r\n                }</div>\r\n            </div>\r\n        })\r\n\r\n        return(\r\n            <div>\r\n                <div className='overflow'>\r\n                    <div className='table' style={len()}>\r\n                        <div className='grid' style={genTemplate('2fr 1fr 3fr')}>{bar}</div>\r\n                        <div>{paragraphs}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    else return <div className='info'>Sorry, such key phrases were not found in any sentence</div>\r\n}\r\n\r\nexport default Table","import {useForm} from \"react-hook-form\";\r\nimport React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport M from \"materialize-css\";\r\n\r\nconst URL = process.env.REACT_APP_FLASK_API\r\n\r\nconst Form = (props) =>\r\n{\r\n    const [url, setUrl] = useState(null);\r\n    const [textarea, setTextArea] = useState([])\r\n    const { register, handleSubmit, formState: { errors } } = useForm({shouldUnregister: true});\r\n\r\n    const changeURL = (str) => setUrl(str)\r\n\r\n    const addTextArea = () =>\r\n    {\r\n        textarea.push('add phrases_' + (textarea.length + 1))\r\n        setTextArea(textarea)\r\n    }\r\n\r\n    const delTextArea = (elem) => {\r\n\r\n        if (textarea.length !== 0)\r\n        {\r\n            const index = textarea.indexOf(elem) + 1\r\n            for(let i = index; i <= textarea.length - 1; i++)\r\n            {\r\n                let el1 = document.getElementById('add phrases_' + index)\r\n                let el2 = document.getElementById('add phrases_' + (index+1))\r\n                el1.value  = el2.value\r\n            }\r\n            textarea.pop()\r\n            setTextArea(textarea)\r\n        }\r\n    }\r\n\r\n    const onSubmit = (data) =>\r\n    {\r\n        console.log(data)\r\n        if (url === URL+'nlp/table')\r\n        {\r\n            props.updateLoad(true)\r\n            axios.post(url, data)\r\n                .then(res=> {\r\n                    props.updateData(res.data)\r\n                    props.updateLoad(false)\r\n                    changeURL(URL)\r\n                })\r\n                .catch(err =>{\r\n                    props.updateLoad(false)\r\n                    changeURL(URL)\r\n                })\r\n        }\r\n\r\n        else if (url === URL+'nlp/xlsx')\r\n        {\r\n            props.updateLoad(true)\r\n            axios.post(url, data, { responseType: 'blob' })\r\n                .then(res=> {\r\n                    const url = window.URL.createObjectURL(new Blob([res.data]));\r\n                    const link = document.createElement('a');\r\n                    link.href = url;\r\n                    link.setAttribute('download', 'file.xlsx'); //or any other extension\r\n                    document.body.appendChild(link);\r\n                    link.click();\r\n                    props.updateLoad(false);\r\n                    changeURL(URL)\r\n                })\r\n                .catch(err =>{\r\n                    props.updateLoad(false)\r\n                    changeURL(URL)\r\n                })\r\n        }\r\n    }\r\n\r\n    useEffect(() =>\r\n    {\r\n        const ta = document.querySelectorAll('.has-character-counter');\r\n        M.CharacterCounter.init(ta);\r\n    })\r\n\r\n    return(\r\n        <form className=\"form\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className='flex-area'>\r\n                <div className=\"input-field inputs\">\r\n                <textarea\r\n                    id=\"textarea1\"\r\n                    className='materialize-textarea has-character-counter'\r\n                    style={{\"height\":\"70px\"}}\r\n                    data-length=\"100\"\r\n                    {...register(\"phrases\", {required: true, maxLength: 100})}\r\n                />\r\n                    <label htmlFor='textarea1'>Phrases (sep. by commas)</label>\r\n                </div>\r\n\r\n                <button className=\" add-phrases btn-floating btn-small waves-effect waves-light blue\"\r\n                        onClick={() => addTextArea()}>\r\n                    <i className=\"material-icons\">add</i>\r\n                </button>\r\n            </div>\r\n            {\r\n                textarea.map((el) => {\r\n                        return <div className='flex-area animation'>\r\n                            <div className=\"input-field inputs\">\r\n                        <textarea\r\n                            id={el}\r\n                            className='materialize-textarea has-character-counter'\r\n                            style={{\"height\":\"70px\"}}\r\n                            data-length=\"100\"\r\n                            {...register(el, {required: true, maxLength: 100})}\r\n                        />\r\n                                        <label htmlFor='textarea1'>Phrases (sep. by commas)</label>\r\n                                    </div>\r\n\r\n                                    <button className=\" add-phrases btn-floating btn-small\r\n                                            waves-effect waves-light blue\"\r\n                                            onClick={() => delTextArea(el)}>\r\n                                        <i className=\"material-icons\">close</i>\r\n                                    </button>\r\n                                </div>\r\n                            }\r\n                )\r\n            }\r\n            <div className='input-field' style={{'minHeight':'335px'}}>\r\n                <textarea\r\n                    id=\"textarea2\"\r\n                    className=\"materialize-textarea has-character-counter\"\r\n                    style={{\"height\":\"300px\"}}\r\n                    data-length=\"10000\"\r\n                    {...register(\"text\", {required: true, maxLength: 10000})} //максимальная длина по ТЗ\r\n                />\r\n                <label htmlFor='textarea2'>Text</label>\r\n            </div>\r\n\r\n            <div style={{'display':'flex'}}>\r\n                <button className=\"btn btn-large waves-effect waves-light light-blue\"\r\n                        style={{\"width\":\"9em\", 'margin': \"0 15px 30px auto\"}}\r\n                        type='submit'\r\n                        onClick={() => changeURL(URL +'nlp/table')}\r\n                        >TABLE\r\n                </button>\r\n                <button className=\"btn btn-large waves-effect waves-light light-blue\"\r\n                        style={{\"width\":\"9em\", 'margin': \"0 auto 30px 15px\"}}\r\n                        type='submit'\r\n                        onClick={() => changeURL(URL + 'nlp/xlsx')}\r\n                        >XLSX\r\n                </button>\r\n\r\n            </div>\r\n\r\n            {errors.exampleRequired && <span>Error(((</span>}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Form","import React, {useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport Table from \"./table\";\nimport Form from \"./form\";\nimport \"./style.css\"\n\nconst App = () =>\n{\n    const [data, setData] = useState(null)\n    const [load, setLoad] = useState(false)\n    const updateData = (data) => setData(data);\n    const updateLoad = (load) => setLoad(load);\n    return (\n        <div>\n            <div className=\"navbar-fixed\">\n                <nav className=\" nav-wrapper blue navbar_text\">\n                    Search for offers\n                </nav>\n            </div>\n\n            {load === true && <div className=\"progress\" style={{'position':'fixed'}}>\n                <div className=\"indeterminate\"> </div>\n            </div>}\n\n            <Form updateData = {updateData} updateLoad = {updateLoad}/>\n            {data !== null && <Table data = {data} updateData = {updateData} updateLoad = {updateLoad}/>}\n        </div>\n    );\n}\n\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}